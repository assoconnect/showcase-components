"use strict";function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_react=_interopRequireWildcard(require("react")),_InputBasic=_interopRequireDefault(require("./InputBasic")),_=require("../"),_styledComponents=_interopRequireDefault(require("styled-components")),_colors=_interopRequireDefault(require("../../styles/colors")),_translations=require("../../utils/translations");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}function _interopRequireWildcard(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!==_typeof(a)&&"function"!=typeof a)return{default:a};var c=_getRequireWildcardCache(b);if(c&&c.has(a))return c.get(a);var d={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!=f&&Object.prototype.hasOwnProperty.call(a,f)){var g=e?Object.getOwnPropertyDescriptor(a,f):null;g&&(g.get||g.set)?Object.defineProperty(d,f,g):d[f]=a[f]}return d["default"]=a,c&&c.set(a,d),d}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _iterableToArrayLimit(a,b){var c=a&&("undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"]);if(null!=c){var d,e,f=[],g=!0,h=!1;try{for(c=c.call(a);!(g=(d=c.next()).done)&&(f.push(d.value),!(b&&f.length===b));g=!0);}catch(a){h=!0,e=a}finally{try{g||null==c["return"]||c["return"]()}finally{if(h)throw e}}return f}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _taggedTemplateLiteral(a,b){return b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}/* Blog  */var InputButtonWrapperBlog=_styledComponents["default"].div(_templateObject||(_templateObject=_taggedTemplateLiteral(["\n  max-width: 100%;\n  position: relative;\n  width: auto;\n  flex-direction: column;\n  > div {\n    text-align: center;\n  }\n"]))),InputButtonStyledBlog=(0,_styledComponents["default"])(_InputBasic["default"])(_templateObject2||(_templateObject2=_taggedTemplateLiteral(["\n  padding-right: 0;\n  width: 100%;\n  border: 0;\n  border-radius: 0;\n  border-bottom: solid 1px #fff;\n  background: 0;\n  .input {\n    width: 100%;\n    color: white;\n  }\n  .outline & {\n    border: 1px solid ",";\n  }\n  .input::placeholder {\n    color: white !important;\n  }\n  padding: 0.588rem;\n"])),_colors["default"].yellow),InputButtonSendBlog=(0,_styledComponents["default"])(_.Button)(_templateObject3||(_templateObject3=_taggedTemplateLiteral(["\n  vertical-align: middle;\n  margin: 1.765rem auto auto auto;\n  transition: background-color 0.3s;\n  outline: none;\n  text-transform: uppercase;\n  border-radius: 21.5px;\n  border: none;\n  color: #316bf2;\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 21px;\n  .button {\n    height: 43px;\n    width: 154px;\n    background-color: #ffffff;\n    padding: 0.647rem 1.1rem;\n    transition: 0.3s;\n    color: #316bf2;\n    border: 1px solid ",";\n\n    .outline & {\n      border: 1px solid ",";\n    }\n    &:hover {\n      background-color: transparent;\n      border-color: ",";\n      color: ",";\n    }\n  }\n"])),_colors["default"].white,_colors["default"].white,_colors["default"].white,_colors["default"].white),ErrorMessageBlog=_styledComponents["default"].div(_templateObject4||(_templateObject4=_taggedTemplateLiteral(["\n  font-family: ",";\n  font-weight: ",";\n  color: #f4674a;\n  margin-bottom: 5px;\n"])),_.UI.fonts.family.roboto,_.UI.fonts.weight.bold),FormStyled=_styledComponents["default"].form(_templateObject5||(_templateObject5=_taggedTemplateLiteral(["\n  /* Mobile mode */\n  @media screen and (max-width: ",") {\n    text-align: center;\n  }\n"])),_.UI.breakpoints.mobile),InputButtonContainer=_styledComponents["default"].div(_templateObject6||(_templateObject6=_taggedTemplateLiteral(["\n  display: inline-block;\n  width: 100%;\n"]))),InputButtonWrapper=_styledComponents["default"].div(_templateObject7||(_templateObject7=_taggedTemplateLiteral(["\n  display: inline-flex;\n  align-content: stretch;\n  width: 550px;\n  max-width: 100%;\n  position: relative;\n\n  /* Mobile mode */\n  @media screen and (max-width: ",") {\n    width: auto;\n    flex-direction: column;\n  }\n"])),_.UI.breakpoints.mobile),InputButtonStyled=(0,_styledComponents["default"])(_InputBasic["default"])(_templateObject8||(_templateObject8=_taggedTemplateLiteral(["\n  padding-right: 0;\n  flex-grow: 3;\n  height: 41px;\n\n  .input {\n    width: 100%;\n  }\n  .outline & {\n    border: 1px solid ",";\n  }\n  /* Mobile mode */\n  @media screen and (max-width: ",") {\n    height: 44px;\n  }\n  /* Desktop mode */\n  @media screen and (min-width: ",") {\n    border-radius: 2.941rem 0 0 2.941rem;\n  }\n"])),_colors["default"].yellow,_.UI.breakpoints.mobile,_.UI.breakpoints.mobile),InputButtonButton=(0,_styledComponents["default"])(_.Button)(_templateObject9||(_templateObject9=_taggedTemplateLiteral(["\n  vertical-align: middle;\n\n  /* Mobile mode */\n  @media screen and (max-width: ",") {\n    margin-top: 1.765rem;\n    height: auto;\n  }\n  .button {\n    height: 41px;\n    padding: 0.647rem 1.1rem;\n    transition: 0.3s;\n    .outline & {\n      border: 1px solid ",";\n    }\n    &:hover {\n      background-color: #f9ac29;\n      border-color: #f9ac29;\n    }\n    /* Desktop mode */\n    @media screen and (min-width: ",") {\n      border-radius: 0 2.941rem 2.941rem 0;\n      margin: 0;\n    }\n  }\n"])),_.UI.breakpoints.mobile,_colors["default"].yellow,_.UI.breakpoints.mobile),ErrorMessage=_styledComponents["default"].div(_templateObject10||(_templateObject10=_taggedTemplateLiteral(["\n  font-family: ",";\n  font-weight: ",";\n  color: #f4674a;\n  margin-bottom: 5px;\n"])),_.UI.fonts.family.roboto,_.UI.fonts.weight.bold),getHubspotBody=function(a){var b=a.email,c=a.referrer,d=a.page,e=a.pageUri,f=a.pageName;return JSON.stringify({fields:[{name:"email",value:b},{name:"referrer",value:c},{name:"page",value:d}],context:{pageUri:e,pageName:f},legalConsentOptions:{consent:{consentToProcess:!0,text:(0,_translations.formatMessage)("inputbutton_consent")}}})},InputButton=function(a){var b=a.className,c=a.translations,d=a.href,e=void 0===d?"https://app.assoconnect.com/sign-up":d,f=a.hubspotId,g=a.newsletter,h=(0,_react.useState)(""),i=_slicedToArray(h,2),j=i[0],k=i[1],l=(0,_react.useState)(null),m=_slicedToArray(l,2),n=m[0],o=m[1],p=function(){setTimeout(function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({"email-passed":j}),window.location.href=window.location.search.length||-1!==e.indexOf("?")?window.location.search.length?"".concat(e).concat(window.location.search,"&email=").concat(j):"".concat(e,"&email=").concat(j):"".concat(e,"?email=").concat(j)},400)},q=function(){f?fetch("https://api.hsforms.com/submissions/v3/integration/submit/3038993/".concat(f),{headers:{"Content-Type":"application/json"},mode:"cors",method:"POST",body:getHubspotBody({email:j,referrer:document.referrer,page:document.title,pageUri:window.location.href,pageName:document.title})})["catch"](function(a){console.error(a)})["finally"](function(){p()}):p()},r=function(a){o(""),k(a.target.value)};return/*#__PURE__*/_react["default"].createElement(FormStyled,{className:b,onSubmit:function handleSubmit(a){// Errors
return a.preventDefault(),o(""),j?null===j.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?void o((0,_translations.formatMessage)("inputbutton_validation_email",c)):void// Submit
q():void o((0,_translations.formatMessage)("inputbutton_validation_required",c))}},g?/*#__PURE__*/_react["default"].createElement(InputButtonContainer,null,n&&/*#__PURE__*/_react["default"].createElement(ErrorMessageBlog,null,n),/*#__PURE__*/_react["default"].createElement(InputButtonWrapperBlog,{className:"button animation--start-hover"},/*#__PURE__*/_react["default"].createElement(InputButtonStyledBlog,{name:"email",type:"text",placeholder:(0,_translations.formatMessage)("inputbutton_placeholder_blog",c),onChange:r,value:j}),/*#__PURE__*/_react["default"].createElement(InputButtonSendBlog,{type:"submit",theme:"yellow",size:"big",animationOff:!0},(0,_translations.formatMessage)("inputbuttonNewsletter_text",c)))):/*#__PURE__*/_react["default"].createElement(InputButtonContainer,null,n&&/*#__PURE__*/_react["default"].createElement(ErrorMessage,null,n),/*#__PURE__*/_react["default"].createElement(InputButtonWrapper,{className:"button animation--start-hover"},/*#__PURE__*/_react["default"].createElement(InputButtonStyled,{name:"email",type:"text",placeholder:(0,_translations.formatMessage)("inputbutton_placeholder",c),icon:"common/icon/unicolor/paperplane",onChange:r,value:j}),/*#__PURE__*/_react["default"].createElement(InputButtonButton,{type:"submit",theme:"yellow",size:"big",animationOff:!0},(0,_translations.formatMessage)("inputbutton_text",c)))))},_default=InputButton;exports["default"]=_default;